{% extends "layouts/base.html" %}

{% block title %} User Profile {% endblock %}

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}{% endblock stylesheets %}

{% block content %}

    <div class="content">
        <div class="row">
            {% if mqtt_pcaps_list %}
                {% for pcap in mqtt_pcaps_list %}
                    <div class="col-md-12">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="title">MQTT {{ pcap['type'] }}</h5>
                            </div>
                            <div class="card-body">
                                <form action="{{ url_for('home_blueprint.update') }}" method="POST">
                                    <div class="row">
                                        <div class="col-md-3 pr-md-1">
                                            <div class="form-group">
                                                <label class="form-label">Time</label>
                                                <input type="text" name="time" class="form-control" readonly
                                                       value="{{ pcap['time'] }}">
                                                </section>
                                            </div>
                                        </div>
                                        <div class="col-md-3 pr-md-1">
                                            <div class="form-group">
                                                <label class="form-label">Seq</label>
                                                <input type="number" name="seq" class="form-control" readonly
                                                       value={{ pcap['seq'] }}>
                                                </section>
                                            </div>
                                        </div>
                                        <div class="col-md-3 pr-md-1">
                                            <div class="form-group">
                                                <label>SourceIP</label>
                                                <input type="text" name="source" class="form-control"
                                                       value="{{ pcap['Source'] }}">
                                            </div>
                                        </div>
                                        <div class="col-md-3 pr-md-1">
                                            <div class="form-group">
                                                <label>DestinationIP</label>
                                                <input type="text" name="destination" class="form-control"
                                                       value="{{ pcap['Destination'] }}">
                                            </div>
                                        </div>
                                    </div>
                                    {% if 'topic' in pcap %}
                                        <div class="row">
                                            <div class="col-md-6 pr-md-1">
                                                <div class="form-group">
                                                    <label>Topic</label>
                                                    <input type="text" name="topic" class="form-control"
                                                           value="{{ pcap['topic'] }}">
                                                </div>
                                            </div>
                                            <div class="col-md-1 pr-md-1">
                                                <div class="form-group">
                                                    <label>DUP</label>
                                                    <input type="text" name="dup" class="form-control"
                                                           value="{{ pcap['DUP'] }}">
                                                </div>
                                            </div>
                                            <div class="col-md-1 pr-md-1">
                                                <div class="form-group">
                                                    <label>QoS2</label>
                                                    <input type="text" name="QoS2" class="form-control"
                                                           value="{{ pcap['QoS2'] }}">
                                                </div>
                                            </div>
                                            <div class="col-md-1 pr-md-1">
                                                <div class="form-group">
                                                    <label>RETAIN</label>
                                                    <input type="text" name="retain" class="form-control"
                                                           value="{{ pcap['RETAIN'] }}">
                                                </div>
                                            </div>
                                            <div class="col-md-2 pr-md-1">
                                                <div class="form-group">
                                                    <label>Message_Indentifier</label>
                                                    <input type="text" name="message_identifier"
                                                           class="form-control"
                                                           value="{{ pcap['Message_Identifier'] }}">
                                                </div>
                                            </div>
                                            <div class="col-md-1 pr-md-1">
                                                <div class="form-group">
                                                    <label>Properties_len</label>
                                                    <input type="text" name="prolen" class="form-control"
                                                           value="{{ pcap['Properties_len'] }}" readonly>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <label>Message</label>
                                                    <textarea name="message" class="form-control">{{ pcap['message'] }}</textarea>
                                                </div>
                                            </div>
                                        </div>
                                        <button type="submit" class="btn btn-fill btn-primary">Submit</button>
                                    {% endif %}
                                </form>
                            </div>
                        </div>
                    </div>
                {% endfor %}
                <div class="card-footer">
                    <form method="GET">
                        <button type="submit" class="btn btn-fill btn-primary">Save</button>
                    </form>
                </div>
            {% else %}
                <div class="col-md-12">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="title">MQTT PUBLISH PCAPS DONT EXIST</h3>
                        </div>
                        <div class="card-footer">
                            <button class="btn btn-link btn-primary" type="submit" id="search-button"
                                    data-toggle="modal"
                                    data-target="#searchModal">Upload
                            </button>
                        </div>
                    </div>
                </div>
            {% endif %}
        </div>

    </div>

{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}{% endblock javascripts %}
